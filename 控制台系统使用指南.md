# WhatNote 控制台系统使用指南

## 📖 概述

WhatNote 控制台系统是一个强大的命令行界面，允许用户通过自然语言指令来控制应用程序的各种功能。该系统集成了管家LLM，能够理解复杂的指令并执行相应的操作。

## 🚀 快速开始

### 打开控制台
- **快捷键**: 按 `` ` `` (反引号) 键
- **位置**: 控制台将以覆盖层的形式出现在应用程序上方
- **关闭**: 按 `Escape` 键或再次按 `` ` `` 键

### 基本操作
1. 在输入框中输入自然语言指令
2. 按 `Enter` 键执行命令
3. 使用 `↑/↓` 箭头键浏览命令历史
4. 查看执行结果和系统反馈

## 🎯 核心功能

### 1. 文件管理
- `列出所有PDF文件` - 显示已上传的PDF文件
- `创建一个新的课程文件夹叫'课程名'` - 创建新的课程目录
- `删除文件 [文件名]` - 删除指定文件
- `查看uploads目录的内容` - 浏览上传目录

### 2. 展板操作
- `显示所有展板信息` - 查看所有活跃展板
- `为'课程名'创建一个新展板` - 创建新展板
- `关闭展板 [展板ID]` - 关闭指定展板
- `查看展板的当前状态` - 获取展板详细信息

### 3. 系统管理
- `查看当前系统状态` - 显示应用程序状态
- `检查API配置` - 验证API密钥配置
- `显示内存使用情况` - 查看系统资源
- `重启服务` - 重新启动后端服务

### 4. 智能助手功能
- `帮我整理文件结构` - 自动整理文件
- `分析当前工作流程` - 分析使用模式
- `推荐下一步操作` - 提供操作建议
- `创建学习计划` - 根据文件生成学习计划

## 🛠️ 内置命令

### 系统命令
```bash
help         # 显示帮助信息
clear/cls    # 清空控制台
history      # 显示命令历史
status       # 显示系统状态
exit/quit    # 关闭控制台
```

### 示例对话
```
用户: 创建一个新的课程文件夹叫'机器学习入门'
管家: 已为您创建课程文件夹'机器学习入门'，您现在可以在其中添加相关的PDF文件和创建展板。

用户: 列出所有PDF文件
管家: 当前系统中的PDF文件：
      - 深度学习基础.pdf (15页)
      - 神经网络原理.pdf (32页)
      - 机器学习实战.pdf (45页)

用户: 为'机器学习入门'课程创建一个新展板
管家: 已为'机器学习入门'课程创建新展板，展板ID: board-123456，您可以开始在其中添加PDF文件和笔记。
```

## 🔧 技术特性

### Function Calling 支持
控制台系统支持管家LLM的function calling功能，能够：
- 解析自然语言指令
- 映射到具体的API调用
- 执行多步操作
- 提供实时反馈

### 支持的Function类型
- `get_file_list` - 获取文件列表
- `create_course_folder` - 创建课程文件夹
- `create_board` - 创建新展板
- `get_app_state` - 获取应用状态
- `file_operation` - 文件操作
- `board_operation` - 展板操作
- `system_query` - 系统查询

### 多步操作
系统支持复杂的多步操作，例如：
```
用户: 帮我创建一个完整的课程结构，包括文件夹、展板和初始设置
管家: 我将为您执行以下步骤：
      1. 创建课程文件夹
      2. 设置展板
      3. 配置初始设置
      4. 创建示例文件
      [执行中...]
```

## 🎨 界面特性

### 终端风格UI
- 深色主题，护眼设计
- 等宽字体，便于阅读
- 语法高亮，区分不同类型的消息
- 动画效果，提升用户体验

### 消息类型
- `>` 用户输入（绿色）
- `<` 管家回复（蓝色）
- `#` 系统消息（黄色）
- `!` 错误信息（红色）
- `@` Function调用（紫色）

### 快捷键
- `Enter` - 执行命令
- `↑/↓` - 命令历史导航
- `Escape` - 关闭控制台
- `` ` `` - 打开/关闭控制台

## 🔒 安全特性

### 命令验证
- 所有命令都经过验证
- 危险操作需要确认
- 自动记录操作日志
- 支持操作回滚

### 权限控制
- 基于角色的访问控制
- 敏感操作需要认证
- 审计日志追踪
- 安全沙箱执行

## 📊 状态监控

### 实时状态显示
控制台头部显示：
- 当前时间
- 多步操作进度
- 系统状态指示器
- 连接状态

### 系统指标
- 活跃展板数量
- 文件数量统计
- 内存使用情况
- API调用次数

## 🐛 故障排除

### 常见问题

**控制台无法打开**
- 检查前端服务是否运行
- 确认快捷键设置
- 查看浏览器控制台错误

**命令执行失败**
- 检查后端API服务状态
- 验证命令语法
- 查看错误日志

**响应速度慢**
- 检查网络连接
- 查看API服务负载
- 优化命令复杂度

### 调试模式
开启调试模式：
```
debug on    # 开启调试模式
debug off   # 关闭调试模式
debug info  # 显示调试信息
```

## 🔮 高级用法

### 脚本化操作
```bash
# 批量创建课程结构
create courses: ["AI基础", "机器学习", "深度学习"]

# 批量导入PDF文件
import pdfs from folder: /path/to/pdfs

# 自动化工作流
workflow: create_course -> add_pdfs -> generate_notes
```

### 自定义命令
用户可以创建自定义命令别名：
```bash
alias ll = "列出所有PDF文件"
alias cs = "查看当前系统状态"
alias nb = "创建新展板"
```

## 📈 性能优化

### 响应速度优化
- 命令缓存机制
- 异步执行支持
- 智能预加载
- 结果缓存

### 资源管理
- 内存使用监控
- 连接池管理
- 请求队列优化
- 自动垃圾回收

## 🌟 最佳实践

1. **使用描述性命令**: 清晰表达意图
2. **善用命令历史**: 重复使用常用命令
3. **关注系统状态**: 定期检查状态指示器
4. **及时处理错误**: 查看错误信息并采取行动
5. **合理使用多步操作**: 复杂任务分解执行

## 📝 更新日志

### v1.0.0 (当前版本)
- ✅ 基础控制台界面
- ✅ 自然语言指令解析
- ✅ Function calling支持
- ✅ 多步操作支持
- ✅ 命令历史功能
- ✅ 实时状态监控

### 计划功能
- 🔄 脚本化批量操作
- 🔄 自定义命令别名
- 🔄 插件系统支持
- 🔄 语音指令输入
- 🔄 智能命令建议

---

*欢迎使用WhatNote控制台系统！如有问题或建议，请联系开发团队。* 