# WhatNote 专家LLM 完整使用指南

## 🎯 快速开始

### 1. 打开专家LLM对话窗口

有两种方式可以打开专家LLM：

#### 方式一：右键菜单（推荐）✨
1. 在展板的**任意空白区域**右键点击
2. 选择 **"🤖 问专家LLM"** 选项（蓝色高亮显示）
3. 专家LLM对话窗口将自动打开并关联到当前展板

#### 方式二：通过应用菜单
1. 点击应用顶部的专家LLM按钮
2. 选择要交互的展板

### 2. 开始智能对话

专家LLM会根据你的问题类型，自动提供最相关的回答：

```
🤖 专家LLM助手

欢迎使用专家LLM助手，我负责处理展板 "file-course-9-1" 的所有内容。
请问有什么我可以帮助您的？

───────────────────────────────
💬 [输入你的问题...]                    [发送]
```

## 🧠 智能功能特性

### 📊 自动上下文感知

专家LLM具备**智能上下文感知**能力，会自动了解：

- 📄 **当前打开的PDF文件**和页码
- 📝 **正在编辑的笔记内容**
- 🖼️ **展板上所有窗口的状态**
- 💭 **之前的对话历史**

### 🎯 智能查询类型识别

系统会自动识别你的问题类型，并提供针对性的回答：

#### 1. 📄 PDF相关问题
```
用户: "请帮我分析第3页的内容"
系统: 自动识别为PDF查询，优先提供当前PDF第3页的详细信息
```

#### 2. 📝 笔记编辑问题  
```
用户: "请帮我改进这份笔记，用更简洁的语言"
系统: 自动识别为笔记编辑，优先获取当前笔记内容
```

#### 3. 🔍 分析理论问题
```
用户: "请解释这个概念的原理"
系统: 自动识别为理论分析，优先提供相关文档内容
```

#### 4. 🌐 一般性问题
```
用户: "请介绍一下当前展板的情况"
系统: 自动识别为概览查询，提供展板整体状态
```

## 🛠️ 实用功能

### 1. 🔄 上下文更新

#### 自动更新
- 系统每5分钟自动更新展板信息
- 在你进行关键操作后自动触发更新

#### 手动更新
点击对话框顶部的 **"🔄 更新展板信息"** 按钮

### 2. ⚡ 快速任务

专家LLM界面提供常用的快速任务按钮：

- **📄 生成整本笔记**：为当前PDF生成完整笔记
- **🔍 分析PDF内容**：深度分析PDF内容结构
- **🤖 规划任务**：制定学习和整理计划

### 3. 💬 流式对话

- 支持实时流式输出，即时看到生成过程
- 自动保存对话历史，每个展板独立管理
- 支持长文本生成，适合详细的分析和笔记

## 📱 用户界面详解

### 对话窗口布局

```
┌─────────────────────────────────────────────┐
│ 🤖 专家LLM助手    2个PDF文件  [🔄 更新展板信息] │
├─────────────────────────────────────────────┤
│ [📄 生成整本笔记] [🔍 分析PDF] [🤖 规划任务]    │
│ ─────────────────────────────────────────── │
│                                             │
│ 💬 对话历史区域                              │
│    ├ 用户消息 (右对齐，蓝色背景)               │
│    └ 助手回复 (左对齐，灰色背景，支持Markdown)  │
│                                             │
├─────────────────────────────────────────────┤
│ [文本输入框，支持多行]              [发送按钮] │
│ 按Enter发送，Shift+Enter换行                  │
└─────────────────────────────────────────────┘
```

### 状态指示

- **🔄 旋转图标**：正在更新展板信息
- **⏳ 加载状态**：正在生成回答
- **💭 流式输出**：实时显示生成的内容
- **📊 上次更新时间**：显示最后一次信息更新的时间

## 🎯 最佳使用实践

### 1. 📄 处理PDF文档

```
✅ 推荐做法：
"请帮我分析第5页关于量子力学的内容"
"为这个PDF生成一份思维导图"  
"第3页的公式有什么含义？"

❌ 避免：
"分析这个"（不够具体）
"帮我写作业"（太宽泛）
```

### 2. 📝 笔记编辑

```
✅ 推荐做法：
"请将这份笔记改写得更简洁一些"
"帮我为这个章节添加一些例子"
"检查笔记中是否有逻辑错误"

❌ 避免：
"改进笔记"（没有具体方向）
"写一份新笔记"（缺少基础内容）
```

### 3. 🔍 学习辅助

```
✅ 推荐做法：
"请解释这个概念与之前学的内容有什么联系"
"为我制定这个章节的学习计划"
"这道题的解题思路是什么？"

❌ 避免：
"教我学习"（太宽泛）
"直接给我答案"（缺少学习过程）
```

## 🚀 高级技巧

### 1. 📚 跨文档关联

当展板上有多个PDF时，可以这样提问：
```
"比较文档A第3页和文档B第5页的观点差异"
"结合所有资料，总结这个主题的核心观点"
```

### 2. 📝 渐进式笔记改进

```
第一步: "为这个章节生成初步笔记"
第二步: "将笔记中的理论部分详细展开"  
第三步: "添加一些实际应用的例子"
第四步: "制作这些内容的记忆卡片"
```

### 3. 🎯 学习计划制定

```
"基于当前的学习材料，为我制定一个3天的复习计划"
"分析这些内容的难点，并给出突破建议"
"设计一些练习题来检验我的理解程度"
```

## ⚡ 快捷操作

### 键盘快捷键
- **Enter**: 发送消息
- **Shift + Enter**: 换行
- **Ctrl + ↑**: 重复上一条消息（如果可用）

### 右键菜单增强功能
- 在展板**任意位置**右键都能快速打开专家LLM
- 自动关联到当前展板，无需手动选择
- 菜单中的"问专家LLM"选项有特殊高亮，易于识别

## 📊 系统反馈与状态

### 正常状态指示
- **✅ 上下文已更新**: 展板信息同步成功
- **💬 正在生成回答**: 流式输出进行中
- **📱 已保存对话**: 自动保存到本地

### 错误提示处理
- **⚠️ 网络连接失败**: 检查网络连接，稍后重试
- **⏰ 请求超时**: 内容较多时可能需要更长时间，请耐心等待
- **❌ API调用错误**: 系统临时问题，通常重试即可解决

## 🔧 故障排除

### 常见问题

#### Q: 右键菜单没有显示"问专家LLM"选项
**A**: 
1. 确保在展板区域（不是侧边栏或顶栏）右键
2. 刷新页面重新加载
3. 检查控制台是否有JavaScript错误

#### Q: 专家LLM回答不够准确
**A**:
1. 点击"更新展板信息"按钮刷新上下文
2. 提供更具体的问题描述
3. 确保相关文档已在展板上打开

#### Q: 对话加载很慢
**A**:
1. 大型PDF处理需要更多时间，属于正常现象
2. 复杂问题的分析会比简单问答慢一些
3. 网络状况也会影响响应速度

## 🎉 总结

WhatNote的专家LLM系统结合了**智能上下文感知**、**自动类型识别**和**流式交互**技术，为你提供了一个真正智能的学习助手。通过右键菜单的便捷访问和分层上下文管理，让AI能够精准理解你的学习需求，提供个性化的专业指导。

开始享受智能化的学习体验吧！🚀 