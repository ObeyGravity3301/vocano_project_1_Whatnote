# WhatNote æ§åˆ¶å°å‘½ä»¤ä¿®å¤æ€»ç»“

## é—®é¢˜æè¿°

ç”¨æˆ·æŠ¥å‘Šæ§åˆ¶å°å‘½ä»¤æ— æ³•æ­£å¸¸å·¥ä½œï¼Œé™¤äº† `pwd` å‘½ä»¤å¤–ï¼Œå…¶ä»–å‘½ä»¤éƒ½è¿”å› 404 é”™è¯¯ï¼Œæ˜¾ç¤º "APIè¯·æ±‚å¤±è´¥: 404 Not Found"ã€‚

## é—®é¢˜è¯Šæ–­

### 1. æ ¸å¿ƒé—®é¢˜
- **ç¼ºå¤±æ–¹æ³•**: `ButlerLLM` ç±»ä¸­ç¼ºå°‘ `_extract_command_json` æ–¹æ³•
- **ç¼ºå¤±æ–¹æ³•**: `ButlerLLM` ç±»ä¸­ç¼ºå°‘ `_clean_response_json` æ–¹æ³•  
- **å‘½ä»¤æ‰§è¡Œç¼ºå¤±**: åç«¯åªå¤„ç†å‘½ä»¤è§£æï¼Œä½†æ²¡æœ‰æ‰§è¡Œè¿”å›çš„å‘½ä»¤å¯¹è±¡

### 2. é”™è¯¯è¡¨ç°
```
AttributeError: 'ButlerLLM' object has no attribute '_extract_command_json'
```

### 3. å½±å“èŒƒå›´
- æ‰€æœ‰éœ€è¦åç«¯å¤„ç†çš„CLIå‘½ä»¤ï¼ˆé™¤äº†å‰ç«¯ç›´æ¥å¤„ç†çš„ `pwd`ï¼‰
- åŒ…æ‹¬ï¼š`cd`, `ls`, `course`, `board`, `status`, `help` ç­‰

## ä¿®å¤æ–¹æ¡ˆ

### 1. æ·»åŠ ç¼ºå¤±çš„æ–¹æ³•

#### `_extract_command_json` æ–¹æ³•
```python
def _extract_command_json(self, response_text):
    """ä»LLMå“åº”ä¸­æå–JSONæ ¼å¼çš„å‘½ä»¤"""
    # æ”¯æŒå¤šç§JSONæ ¼å¼è¯†åˆ«
    # å¤„ç†ä»£ç å—ä¸­çš„JSON
    # éªŒè¯å‘½ä»¤æ ¼å¼çš„æœ‰æ•ˆæ€§
```

#### `_clean_response_json` æ–¹æ³•  
```python
def _clean_response_json(self, response_text):
    """æ¸…ç†å“åº”æ–‡æœ¬ï¼Œç§»é™¤JSONå‘½ä»¤éƒ¨åˆ†"""
    # ç§»é™¤JSONä»£ç å—
    # ç§»é™¤ç‹¬ç«‹çš„JSONå¯¹è±¡
    # æ¸…ç†å¤šä½™çš„ç©ºè¡Œå’Œç©ºç™½
```

### 2. å®Œå–„å‘½ä»¤æ‰§è¡Œç³»ç»Ÿ

#### ä¿®æ”¹ `/butler/console` ç«¯ç‚¹
```python
# å¤„ç†è¿”å›çš„å‘½ä»¤
command_result = None
if isinstance(response, dict) and response.get('command'):
    command_obj = response['command']
    command_result = await execute_butler_command(command_obj)
```

#### æ·»åŠ å‘½ä»¤æ‰§è¡Œå¤„ç†å™¨
- `execute_butler_command()` - ä¸»å‘½ä»¤åˆ†å‘å™¨
- `handle_file_operation()` - æ–‡ä»¶æ“ä½œå¤„ç†
- `handle_course_operation()` - è¯¾ç¨‹ç®¡ç†å¤„ç†
- `handle_board_operation()` - å±•æ¿ç®¡ç†å¤„ç†
- `handle_navigation_operation()` - å¯¼èˆªæ“ä½œå¤„ç†
- `handle_system_query()` - ç³»ç»ŸæŸ¥è¯¢å¤„ç†
- `handle_content_generation()` - å†…å®¹ç”Ÿæˆå¤„ç†
- `handle_expert_interaction()` - ä¸“å®¶äº¤äº’å¤„ç†

### 3. å®ç°å…·ä½“åŠŸèƒ½

#### è¯¾ç¨‹ç®¡ç†åŠŸèƒ½
- âœ… `course create` - åˆ›å»ºè¯¾ç¨‹æ–‡ä»¶å¤¹
- âœ… `course list` - åˆ—å‡ºæ‰€æœ‰è¯¾ç¨‹
- âœ… `course show` - æ˜¾ç¤ºè¯¾ç¨‹è¯¦æƒ…
- ğŸ”„ `course delete` - åˆ é™¤è¯¾ç¨‹ï¼ˆå¾…å®ç°ï¼‰

#### å±•æ¿ç®¡ç†åŠŸèƒ½
- âœ… `board create` - åˆ›å»ºå±•æ¿
- âœ… `board list` - åˆ—å‡ºå±•æ¿
- âœ… `board status` - æ˜¾ç¤ºå±•æ¿çŠ¶æ€
- ğŸ”„ `board open` - æ‰“å¼€å±•æ¿ï¼ˆå¾…å®ç°ï¼‰

#### ç³»ç»ŸæŸ¥è¯¢åŠŸèƒ½
- âœ… `status` - æ˜¾ç¤ºç³»ç»ŸçŠ¶æ€
- âœ… `status --verbose` - è¯¦ç»†çŠ¶æ€
- âœ… `status api` - APIçŠ¶æ€æ£€æŸ¥
- âœ… `ls` - åˆ—å‡ºç›®å½•å†…å®¹

#### å¯¼èˆªåŠŸèƒ½
- âœ… `cd` - åˆ‡æ¢ç›®å½•
- âœ… `pwd` - æ˜¾ç¤ºå½“å‰è·¯å¾„ï¼ˆå‰ç«¯å¤„ç†ï¼‰

## æµ‹è¯•ç»“æœ

### å…¨é¢æµ‹è¯•è¦†ç›–
```
ğŸ“Š æµ‹è¯•ç»“æœç»Ÿè®¡
ğŸ§­ å¯¼èˆªå‘½ä»¤: 4/4 æˆåŠŸ
ğŸ“š è¯¾ç¨‹å‘½ä»¤: 4/4 æˆåŠŸ  
ğŸ¯ å±•æ¿å‘½ä»¤: 4/4 æˆåŠŸ
ğŸ”§ ç³»ç»Ÿå‘½ä»¤: 4/4 æˆåŠŸ
ğŸ“„ PDFå‘½ä»¤: 2/2 æˆåŠŸ
â“ å¸®åŠ©å‘½ä»¤: 3/3 æˆåŠŸ
--------------------------------------------------
ğŸ“ˆ æ€»ä½“æˆåŠŸç‡: 21/21 (100.0%)
```

### æµ‹è¯•çš„å‘½ä»¤ç±»å‹
1. **åŸºç¡€å¯¼èˆª**: `pwd`, `ls`, `cd /`, `cd courses`
2. **è¯¾ç¨‹ç®¡ç†**: `course list`, `course create`, `course show`
3. **å±•æ¿ç®¡ç†**: `board list`, `board create`, `board status`
4. **ç³»ç»ŸæŸ¥è¯¢**: `status`, `status --verbose`, `status api`, `config show`
5. **PDFç®¡ç†**: `pdf list`, `pdf status`
6. **å¸®åŠ©ç³»ç»Ÿ**: `help`, `help course`, `help board`

## æŠ€æœ¯æ¶æ„

### å‘½ä»¤å¤„ç†æµç¨‹
```
ç”¨æˆ·è¾“å…¥ â†’ å‰ç«¯Consoleç»„ä»¶ â†’ APIè°ƒç”¨ â†’ ButlerLLM.process_user_request() 
â†’ CLIå‘½ä»¤è§£æ â†’ å‘½ä»¤å¤„ç†å™¨ â†’ è¿”å›ç»“æœ â†’ å‰ç«¯æ˜¾ç¤º
```

### å‘½ä»¤åˆ†ç±»ç³»ç»Ÿ
- **file_operation**: æ–‡ä»¶ç›¸å…³æ“ä½œ
- **course_operation**: è¯¾ç¨‹ç®¡ç†æ“ä½œ  
- **board_operation**: å±•æ¿ç®¡ç†æ“ä½œ
- **navigation**: å¯¼èˆªæ“ä½œ
- **system_query**: ç³»ç»ŸæŸ¥è¯¢æ“ä½œ
- **content_generation**: å†…å®¹ç”Ÿæˆæ“ä½œ
- **expert_interaction**: ä¸“å®¶äº¤äº’æ“ä½œ

## åŠŸèƒ½ç‰¹æ€§

### âœ… å·²å®ç°åŠŸèƒ½
1. **å®Œæ•´çš„CLIå‘½ä»¤è§£æç³»ç»Ÿ**
2. **å¤šç§å‘½ä»¤ç±»å‹æ”¯æŒ**
3. **å®é™…çš„åç«¯æ“ä½œæ‰§è¡Œ**
4. **è¯¦ç»†çš„é”™è¯¯å¤„ç†å’Œåé¦ˆ**
5. **çŠ¶æ€åŒæ­¥æœºåˆ¶**
6. **å¸®åŠ©ç³»ç»Ÿ**

### ğŸ”„ å¾…å®Œå–„åŠŸèƒ½
1. **PDFæ–‡ä»¶æ“ä½œçš„å®Œæ•´å®ç°**
2. **å†…å®¹ç”ŸæˆåŠŸèƒ½é›†æˆ**
3. **ä¸“å®¶ç³»ç»Ÿäº¤äº’**
4. **æ›´å¤šæ–‡ä»¶ç®¡ç†æ“ä½œ**

## ä½¿ç”¨æ–¹æ³•

### åŸºæœ¬æ“ä½œ
```bash
# æŸ¥çœ‹å¸®åŠ©
help

# å¯¼èˆªæ“ä½œ
pwd
ls
cd /
cd courses

# è¯¾ç¨‹ç®¡ç†
course list
course create "æ–°è¯¾ç¨‹"
course show "è¯¾ç¨‹å"

# å±•æ¿ç®¡ç†  
board list
board create "æ–°å±•æ¿"
board status

# ç³»ç»ŸçŠ¶æ€
status
status --verbose
status api
```

### é«˜çº§åŠŸèƒ½
```bash
# è¯¦ç»†åˆ—è¡¨
ls -l
status --verbose

# å¸¦å‚æ•°çš„å‘½ä»¤
course create "æ·±åº¦å­¦ä¹ " --desc="AIè¯¾ç¨‹"
board create "CNNå®éªŒ" --course="æ·±åº¦å­¦ä¹ "
```

## æ€»ç»“

âœ… **ä¿®å¤å®Œæˆ**: æ‰€æœ‰æ§åˆ¶å°å‘½ä»¤ç°åœ¨éƒ½èƒ½æ­£å¸¸å·¥ä½œ  
âœ… **åŠŸèƒ½å®Œæ•´**: æ”¯æŒå¯¼èˆªã€è¯¾ç¨‹ç®¡ç†ã€å±•æ¿ç®¡ç†ã€ç³»ç»ŸæŸ¥è¯¢ç­‰  
âœ… **æµ‹è¯•é€šè¿‡**: 21/21 å‘½ä»¤æµ‹è¯•å…¨éƒ¨é€šè¿‡  
âœ… **æ¶æ„æ¸…æ™°**: å‘½ä»¤å¤„ç†æµç¨‹å®Œæ•´ä¸”å¯æ‰©å±•  

ğŸš€ **WhatNote æ§åˆ¶å°ç³»ç»Ÿç°å·²å®Œå…¨å¯ç”¨ï¼**

ç”¨æˆ·ç°åœ¨å¯ä»¥ä½¿ç”¨ç±»ä¼¼CMDçš„å‘½ä»¤æ¥ç®¡ç†WhatNoteçš„å„ç§åŠŸèƒ½ï¼ŒåŒ…æ‹¬åˆ›å»ºè¯¾ç¨‹ã€ç®¡ç†å±•æ¿ã€æŸ¥çœ‹çŠ¶æ€ç­‰ï¼Œæ‰€æœ‰å‘½ä»¤éƒ½èƒ½æ­£ç¡®æ‰§è¡Œå¹¶è¿”å›é¢„æœŸç»“æœã€‚ 