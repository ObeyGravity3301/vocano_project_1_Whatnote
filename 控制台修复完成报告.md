# WhatNote æ§åˆ¶å°é—®é¢˜ä¿®å¤å®ŒæˆæŠ¥å‘Š

## ğŸ“‹ ä¿®å¤æ¦‚è¿°

é’ˆå¯¹ç”¨æˆ·åé¦ˆçš„æ§åˆ¶å°é—®é¢˜ï¼Œæˆ‘ä»¬å·²ç»å®Œæˆäº†å…¨é¢çš„ä¿®å¤å·¥ä½œã€‚æœ¬æ¬¡ä¿®å¤ä¸»è¦è§£å†³äº†ä¸¤ä¸ªæ ¸å¿ƒé—®é¢˜ï¼š

1. **æ§åˆ¶å°åˆ›å»ºçš„æ–‡æœ¬æ¡†ä¸å¯è§é—®é¢˜**
2. **é‡å‘½ååcdå‘½ä»¤æ²¡æœ‰æ›´æ–°çš„é—®é¢˜**

## ğŸ”§ å…·ä½“ä¿®å¤å†…å®¹

### 1. æ·»åŠ äº†å®Œæ•´çš„ `board rename` å‘½ä»¤

**é—®é¢˜**: ç”¨æˆ·é‡å‘½åå±•æ¿åï¼Œæ§åˆ¶å°çš„ `board` å‘½ä»¤ç¼ºå°‘ `rename` æ“ä½œ

**è§£å†³æ–¹æ¡ˆ**:
- åœ¨ `main.py` çš„ `handle_board_command` å‡½æ•°ä¸­æ·»åŠ äº†å®Œæ•´çš„ `rename` æ“ä½œ
- æ”¯æŒè¯­æ³•: `board rename <æ—§åç§°> <æ–°åç§°>`
- è‡ªåŠ¨éªŒè¯åç§°å†²çªï¼Œç¡®ä¿é‡å‘½åçš„å”¯ä¸€æ€§
- æ”¯æŒå¸¦å¼•å·çš„åç§°å¤„ç†

**ä»£ç ä½ç½®**: `main.py:3804-3866`

```python
elif action == "rename":
    if len(args) < 3:
        return {
            "response": "ç”¨æ³•: board rename <æ—§åç§°> <æ–°åç§°>", 
            "type": "error",
            "style": "color: #ff6b6b; background: transparent;"
        }
    
    old_name = args[1]
    new_name = ' '.join(args[2:])
    
    # å»æ‰å¤–å±‚å¼•å·
    if (old_name.startswith('"') and old_name.endswith('"')) or (old_name.startswith("'") and old_name.endswith("'")):
        old_name = old_name[1:-1]
    if (new_name.startswith('"') and new_name.endswith('"')) or (new_name.startswith("'") and new_name.endswith("'")):
        new_name = new_name[1:-1]
    
    # æŸ¥æ‰¾è¦é‡å‘½åçš„å±•æ¿
    boards = app_state.get_boards()
    target_board = None
    for board in boards:
        if board['name'] == old_name or board['name'].lower() == old_name.lower():
            target_board = board
            break
    
    if not target_board:
        return {
            "response": f"æ‰¾ä¸åˆ°å±•æ¿: {old_name}", 
            "type": "error",
            "style": "color: #ff6b6b; background: transparent;"
        }
    
    # æ£€æŸ¥æ–°åç§°æ˜¯å¦å·²å­˜åœ¨ï¼ˆåœ¨åŒä¸€è¯¾ç¨‹ä¸­ï¼‰
    course_folder = target_board.get('course_folder', '')
    for board in boards:
        if (board['name'] == new_name or board['name'].lower() == new_name.lower()) and board.get('course_folder', '') == course_folder and board['id'] != target_board['id']:
            scope_msg = f"è¯¾ç¨‹ '{course_folder}' ä¸­" if course_folder else "ç³»ç»Ÿä¸­"
            return {
                "response": f"å±•æ¿åç§° '{new_name}' åœ¨{scope_msg}å·²å­˜åœ¨", 
                "type": "error",
                "style": "color: #ff6b6b; background: transparent;"
            }
    
    # æ›´æ–°å±•æ¿åç§°
    target_board['name'] = new_name
    app_state.save_state()
    
    course_info = f" (è¯¾ç¨‹: {course_folder})" if course_folder else ""
    return {
        "response": f"âœ… å±•æ¿å·²é‡å‘½å: '{old_name}' â†’ '{new_name}'{course_info}", 
        "type": "success",
        "style": "color: #51cf66; background: transparent;",
        "refresh_needed": True
    }
```

### 2. æ”¹è¿›äº† `cd` å‘½ä»¤çš„åç§°åŒ¹é…é€»è¾‘

**é—®é¢˜**: ç”¨æˆ·é‡å‘½åæ–‡ä»¶å¤¹æˆ–å±•æ¿åï¼Œcdå‘½ä»¤è¿˜æ˜¯éœ€è¦ä½¿ç”¨åŸæ¥çš„åç§°

**è§£å†³æ–¹æ¡ˆ**:
- å®ç°äº†å¤šå±‚çº§åŒ¹é…ç­–ç•¥ï¼šç²¾ç¡®åŒ¹é… â†’ å¤§å°å†™ä¸æ•æ„ŸåŒ¹é… â†’ éƒ¨åˆ†åŒ¹é…
- æ”¯æŒé‡å‘½ååçš„è‡ªåŠ¨åç§°è¯†åˆ«
- æä¾›æ™ºèƒ½å»ºè®®åŠŸèƒ½

**ä»£ç ä½ç½®**: `main.py:3146-3240`

**åŒ¹é…ä¼˜å…ˆçº§**:
1. **ç²¾ç¡®åŒ¹é…**: å®Œå…¨ç›¸åŒçš„åç§°ï¼ˆæœ€é«˜ä¼˜å…ˆçº§ï¼‰
2. **å¤§å°å†™ä¸æ•æ„ŸåŒ¹é…**: å¿½ç•¥å¤§å°å†™çš„å®Œå…¨åŒ¹é…
3. **éƒ¨åˆ†åŒ¹é…**: åŒ…å«å…³ç³»åŒ¹é…ï¼ˆå¤„ç†é‡å‘½ååçš„æ¨¡ç³ŠåŒ¹é…ï¼‰

### 3. ä¿®å¤äº†è‡ªå®šä¹‰çª—å£æ˜¾ç¤ºé€»è¾‘

**é—®é¢˜**: æ§åˆ¶å°åˆ›å»ºçš„æ–‡æœ¬æ¡†è™½ç„¶åœ¨åç«¯åˆ›å»ºæˆåŠŸï¼Œä½†åœ¨å‰ç«¯å±•æ¿ä¸Šä¸å¯è§

**è§£å†³æ–¹æ¡ˆ**:
- ä¿®å¤äº† `renderCustomWindows` å‡½æ•°ä¸­çš„å¯è§æ€§åˆ¤æ–­é€»è¾‘
- æ”¹è¿›äº†çª—å£åŠ è½½å’Œæ˜¾ç¤ºæœºåˆ¶
- ç¡®ä¿æ§åˆ¶å°å¯¼èˆªäº‹ä»¶æ­£ç¡®è¿æ¥

**ä»£ç ä½ç½®**: `frontend/src/App.js:4311-4360`

**ä¿®å¤å‰**:
```javascript
if (!visibility[window.id]) return null;
```

**ä¿®å¤å**:
```javascript
// é»˜è®¤æ˜¾ç¤ºæ‰€æœ‰çª—å£ï¼Œé™¤éæ˜ç¡®è®¾ç½®ä¸ºéšè—
if (visibility.hasOwnProperty(window.id) && visibility[window.id] === false) return null;
```

## ğŸ“ æ–‡ä»¶å¤‡ä»½

ä¿®å¤è¿‡ç¨‹ä¸­å·²è‡ªåŠ¨åˆ›å»ºå¤‡ä»½ï¼š
- å¤‡ä»½ç›®å½•: `console_fix_backup_20250607_150230/`
- å¤‡ä»½æ–‡ä»¶:
  - `main.py` â†’ `main.py.backup`
  - `frontend/src/App.js` â†’ `frontend_src_App.js.backup`
  - `frontend/src/components/Console.js` â†’ `frontend_src_components_Console.js.backup`
  - `frontend/src/components/TextBoxWindow.js` â†’ `frontend_src_components_TextBoxWindow.js.backup`

## ğŸ§ª æµ‹è¯•éªŒè¯

åˆ›å»ºäº†å®Œæ•´çš„æµ‹è¯•è„šæœ¬ `test_console_fixes.py` æ¥éªŒè¯ä¿®å¤æ•ˆæœï¼ŒåŒ…å«ï¼š

1. **Board Rename æµ‹è¯•**: åˆ›å»ºå±•æ¿ â†’ é‡å‘½å â†’ cdåˆ°æ–°åç§°
2. **Window Creation æµ‹è¯•**: è¿›å…¥å±•æ¿ â†’ åˆ›å»ºçª—å£ â†’ åˆ—å‡ºéªŒè¯
3. **Enhanced CD æµ‹è¯•**: éƒ¨åˆ†åŒ¹é… â†’ å¤§å°å†™ä¸æ•æ„ŸåŒ¹é…

## ğŸ¯ ä½¿ç”¨è¯´æ˜

### 1. Board Rename å‘½ä»¤
```bash
# è¿›å…¥æ§åˆ¶å° (æŒ‰ ` é”®)
board rename "æ—§å±•æ¿å" "æ–°å±•æ¿å"
```

### 2. å¢å¼ºçš„ CD å‘½ä»¤
```bash
# ç²¾ç¡®åŒ¹é…
cd "æœºå™¨å­¦ä¹ è¯¾ç¨‹"

# éƒ¨åˆ†åŒ¹é…ï¼ˆæ”¯æŒé‡å‘½ååçš„æ¨¡ç³ŠåŒ¹é…ï¼‰
cd "æœºå™¨å­¦ä¹ "  # ä¼šåŒ¹é…åˆ° "æœºå™¨å­¦ä¹ è¯¾ç¨‹"

# å¤§å°å†™ä¸æ•æ„Ÿ
cd "MACHINE LEARNING"  # ä¼šåŒ¹é…åˆ° "machine learning"
```

### 3. çª—å£åˆ›å»ºå’Œæ˜¾ç¤º
```bash
# å…ˆè¿›å…¥å±•æ¿
cd "æˆ‘çš„å±•æ¿"

# åˆ›å»ºæ–‡æœ¬çª—å£
window create text "æˆ‘çš„ç¬”è®°"

# åˆ›å»ºå›¾ç‰‡çª—å£
window create image "å›¾ç‰‡æ ‡æ³¨"

# åˆ—å‡ºæ‰€æœ‰çª—å£
window list
```

## ğŸ”„ é‡å¯è¯´æ˜

ä¸ºä½¿ä¿®å¤ç”Ÿæ•ˆï¼Œè¯·æ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š

1. **é‡å¯åç«¯æœåŠ¡å™¨**:
   ```bash
   # åœæ­¢å½“å‰æœåŠ¡å™¨ (Ctrl+C)
   # é‡æ–°å¯åŠ¨
   python main.py
   ```

2. **åˆ·æ–°å‰ç«¯é¡µé¢**:
   - åœ¨æµè§ˆå™¨ä¸­æŒ‰ `F5` æˆ– `Ctrl+R` åˆ·æ–°é¡µé¢

3. **æµ‹è¯•ä¿®å¤æ•ˆæœ**:
   ```bash
   # è¿è¡Œæµ‹è¯•è„šæœ¬éªŒè¯
   python test_console_fixes.py
   ```

## âœ… ä¿®å¤éªŒè¯

### æµ‹è¯• Board Rename åŠŸèƒ½
1. æŒ‰ ` é”®å‘¼å‡ºæ§åˆ¶å°
2. è¾“å…¥: `board create "æµ‹è¯•å±•æ¿"`
3. è¾“å…¥: `board rename "æµ‹è¯•å±•æ¿" "æ–°æµ‹è¯•å±•æ¿"`
4. è¾“å…¥: `cd "æ–°æµ‹è¯•å±•æ¿"`
5. éªŒè¯: åº”è¯¥èƒ½æˆåŠŸè¿›å…¥é‡å‘½ååçš„å±•æ¿

### æµ‹è¯•çª—å£åˆ›å»ºåŠŸèƒ½
1. ç¡®ä¿åœ¨ä¸€ä¸ªå±•æ¿ä¸­
2. è¾“å…¥: `window create text "æµ‹è¯•æ–‡æœ¬æ¡†"`
3. éªŒè¯: å±•æ¿ä¸Šåº”è¯¥ç«‹å³å‡ºç°ä¸€ä¸ªå¯è§çš„ç»¿è‰²æ ‡é¢˜æ æ–‡æœ¬æ¡†çª—å£

### æµ‹è¯•å¢å¼º CD åŠŸèƒ½
1. åˆ›å»ºå±•æ¿: `board create "æœºå™¨å­¦ä¹ åŸºç¡€è¯¾ç¨‹"`
2. éƒ¨åˆ†åŒ¹é…: `cd "æœºå™¨å­¦ä¹ "` ï¼ˆåº”è¯¥èƒ½åŒ¹é…æˆåŠŸï¼‰
3. å¤§å°å†™æµ‹è¯•: `cd "MACHINE"` ï¼ˆåº”è¯¥èƒ½åŒ¹é…æˆåŠŸï¼‰

## ğŸš€ æ–°å¢åŠŸèƒ½ç‰¹æ€§

1. **æ™ºèƒ½åç§°åŒ¹é…**: cdå‘½ä»¤ç°åœ¨æ”¯æŒæ¨¡ç³ŠåŒ¹é…ï¼Œé‡å‘½ååæ— éœ€è®°ä½å®Œæ•´æ–°åç§°
2. **å®Œæ•´çš„å±•æ¿ç®¡ç†**: ç°åœ¨æ”¯æŒ createã€listã€deleteã€renameã€show å…¨å¥—å±•æ¿æ“ä½œ
3. **å¢å¼ºçš„çª—å£æ˜¾ç¤º**: æ§åˆ¶å°åˆ›å»ºçš„çª—å£ä¼šç«‹å³åœ¨å±•æ¿ä¸Šæ˜¾ç¤ºï¼Œæ— éœ€æ‰‹åŠ¨åˆ·æ–°
4. **æ”¹è¿›çš„é”™è¯¯æç¤º**: æä¾›æ›´è¯¦ç»†çš„é”™è¯¯ä¿¡æ¯å’Œå»ºè®®

## ğŸ› ï¸ æŠ€æœ¯ç»†èŠ‚

### ä¿®å¤çš„å…³é”®æŠ€æœ¯ç‚¹
1. **çŠ¶æ€åŒæ­¥**: ç¡®ä¿å‰åç«¯çŠ¶æ€ä¸€è‡´æ€§
2. **åç§°åŒ¹é…ç®—æ³•**: å®ç°äº†å¤šå±‚çº§åŒ¹é…ç­–ç•¥
3. **UIå“åº”æœºåˆ¶**: ä¿®å¤äº†çª—å£å¯è§æ€§åˆ¤æ–­é€»è¾‘
4. **äº‹ä»¶ä¼ æ’­**: æ”¹è¿›äº†æ§åˆ¶å°å‘½ä»¤ä¸UIçš„äº¤äº’

### å…¼å®¹æ€§ä¿è¯
- æ‰€æœ‰ç°æœ‰åŠŸèƒ½ä¿æŒä¸å˜
- å‘ä¸‹å…¼å®¹åŸæœ‰çš„æ§åˆ¶å°å‘½ä»¤
- æ–°å¢åŠŸèƒ½ä¸å½±å“ç°æœ‰å·¥ä½œæµç¨‹

## ğŸ“ åç»­æ”¯æŒ

å¦‚æœåœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­é‡åˆ°ä»»ä½•é—®é¢˜ï¼Œå¯ä»¥ï¼š

1. è¿è¡Œæµ‹è¯•è„šæœ¬æ£€æŸ¥åŠŸèƒ½çŠ¶æ€
2. æŸ¥çœ‹æ§åˆ¶å°è°ƒè¯•è¾“å‡º
3. ä½¿ç”¨å¤‡ä»½æ–‡ä»¶å¿«é€Ÿæ¢å¤åˆ°ä¿®å¤å‰çŠ¶æ€

## ğŸ‰ æ€»ç»“

æœ¬æ¬¡ä¿®å¤å…¨é¢è§£å†³äº†ç”¨æˆ·åé¦ˆçš„æ§åˆ¶å°é—®é¢˜ï¼Œæå‡äº†ç³»ç»Ÿçš„æ˜“ç”¨æ€§å’Œç¨³å®šæ€§ã€‚æ–°å¢çš„åŠŸèƒ½å’Œæ”¹è¿›å°†æ˜¾è‘—æå‡ç”¨æˆ·çš„ä½¿ç”¨ä½“éªŒï¼Œç‰¹åˆ«æ˜¯åœ¨å±•æ¿ç®¡ç†å’Œçª—å£æ“ä½œæ–¹é¢ã€‚ 