# 📝 WhatNote 文本框功能使用指南

## 🎯 功能概述

WhatNote 现在支持在展板中创建简单的文本框，这些文本框类似于展板笔记，但没有LLM功能，只能通过用户手动编辑或控制台指令修改内容。这为将来管家LLM通过控制台命令随心所欲地展示内容提供了基础。

## ✨ 主要特性

- 📦 **简单文本显示**：支持纯文本内容展示
- 🎛️ **控制台管理**：通过控制台命令创建、管理文本框
- 💾 **持久化存储**：文本框数据保存在展板日志中
- 🔄 **前端同步**：前端可以加载和显示文本框内容
- 🎨 **可拖拽界面**：支持拖拽、调整大小等操作

## 🚀 使用方法

### 1. 基本操作流程

```bash
# 1. 创建或进入课程文件夹
course create "我的课程"

# 2. 创建展板
board create "我的展板"

# 3. 进入展板
cd "我的展板"

# 4. 创建文本框
window create text "我的文本框"

# 5. 列出当前展板的所有窗口
window list

# 6. 查看展板状态
pwd
```

### 2. 控制台命令详解

#### 创建文本框
```bash
# 基本语法
window create text [标题]

# 示例
window create text "笔记摘要"
window create text "重要提醒"
window create text "学习计划"
```

#### 管理文本框
```bash
# 列出所有窗口
window list

# 显示窗口详情（如果支持）
window show [窗口ID]

# 删除窗口（如果支持）
window delete [窗口ID]
```

## 🔧 技术实现

### 后端架构

1. **控制台命令处理**：`handle_window_command()` 函数
2. **数据存储**：使用 `board_logger.py` 管理展板窗口数据
3. **API接口**：`/api/boards/{board_id}` 返回展板窗口数据

### 前端架构

1. **组件结构**：
   - `TextBoxWindow.js`：文本框显示组件
   - `TextBoxWindow.css`：样式文件
   - `App.js`：主应用逻辑

2. **状态管理**：
   - `customWindows`：存储窗口数据
   - `customWindowsVisible`：控制窗口可见性

## 📋 测试验证

### 后端测试
```bash
# 运行完整的后端测试
python test_simple_textbox_creation.py

# 运行逐步调试测试
python test_step_by_step_debug.py
```

### 前端测试
1. 确保WhatNote服务正在运行（`python main.py`）
2. 在浏览器中打开 `test_frontend_textbox.html`
3. 点击"🚀 执行完整测试"按钮
4. 查看文本框是否正确显示

## 🔍 故障排除

### 常见问题

1. **文本框创建失败**
   - 确保已经进入展板（使用`cd`命令）
   - 检查控制台路径上下文是否正确

2. **前端看不到文本框**
   - 检查`get_board_info` API是否返回正确的窗口数据
   - 确认前端`loadCustomWindows`函数被正确调用

3. **窗口数据丢失**
   - 检查`board_logger`文件是否正常保存
   - 确认没有意外调用`init_board`清空数据

### 调试工具

1. **后端调试**：
   ```bash
   # 检查展板日志文件
   ls board_logs/
   
   # 查看具体展板的日志
   cat board_logs/board-[展板ID].json
   ```

2. **前端调试**：
   - 使用浏览器开发者工具查看控制台输出
   - 检查网络请求是否正常
   - 使用测试页面进行功能验证

## 🎛️ 控制台命令参考

### 展板导航
```bash
cd [展板名称]           # 进入展板
pwd                    # 显示当前路径
ls                     # 列出当前目录内容
```

### 窗口管理
```bash
window create text [标题]    # 创建文本窗口
window create image [标题]   # 创建图像窗口（预留）
window list                  # 列出所有窗口
window show [窗口ID]         # 显示窗口详情
window delete [窗口ID]       # 删除窗口
```

### 状态查看
```bash
status                 # 查看系统状态
board list            # 列出所有展板
course list           # 列出所有课程
```

## 🚀 将来扩展

这个文本框功能为将来的管家LLM功能奠定了基础：

1. **智能内容生成**：管家LLM可以通过控制台命令在指定位置创建和更新文本框
2. **动态内容展示**：根据用户需求实时生成和显示相关内容
3. **多媒体支持**：未来可以扩展支持图像、图表等多媒体内容
4. **交互增强**：添加编辑、评论、标注等交互功能

## 📝 示例工作流

```bash
# 1. 创建学习笔记展板
course create "数据结构课程"
board create "第一章：数组与链表"
cd "第一章：数组与链表"

# 2. 创建多个文本框组织内容
window create text "知识点总结"
window create text "练习题集"
window create text "重难点分析"

# 3. 查看创建结果
window list
pwd
status
```

这样，您就可以在展板中创建多个文本框来组织不同类型的内容，为将来更高级的功能应用打下基础。 